<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock - Paper - Scissors</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
   
    <h2>Rock - Paper - Scissors</h2>
    <blockquote>The rules are simple.
        <ul>
            <li>Rock beats Scissors</li>
            <li>Scissors beats Paper </li>
            <li>Paper beats Rock</li>
        </ul>
        First to 5 points wins !
    </blockquote>

    <div class="score">
        <h3>Score :</h3>
        <table>
            <thead>
                <td>Player</td>
                <td>CPU</td>
            </thead>
            <tr>
                <td id="player"></td>
                <td id="cpu"></td>
            </tr>
        </table>
    </div>

    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
    <div>
        <button id="reset">Reset</button>
    </div>
    <div id="match">Progress :</div>
    

    <script>

        // initialize moves array
        let moves = ['rock', 'paper', 'scissors'];


        //  computer : choose move randomly

        function getComputerChoice(){
            let num = Math.floor((Math.random()*3)) ;
            // console.log(moves[num]);
            return moves[num];
            
        }


        
        let btns = Array.from(document.querySelectorAll("button"));
        btns.pop();
        let reset = document.querySelector("#reset");
        let match = document.querySelector("#match");

        const progress = document.createElement("ul");
        match.appendChild(progress);
        


        function playGame(match) {
            // initialize score and scorecard
            let human = 0 ;
            let cpu = 0 ;
            const playerScore = document.getElementById("player");
            const cpuScore = document.getElementById("cpu");
            playerScore.innerText = human;
            cpuScore.innerText = cpu;


            // create ul showing match progress


            // a single round - declaration/definition
            function playRound(hMove, match){
                if (human < 5 && cpu < 5) {
                    let result = document.createElement("li");
                    cMove = getComputerChoice()
                    if (hMove === 'rock' && cMove === 'scissors' || hMove === 'scissors' && cMove === 'paper' || hMove === 'paper' && cMove === 'rock'){
                        result.innerText = `You won ! --     "${hMove}" beats "${cMove}"` 
                        progress.appendChild(result);
                        human++;
                    } else if (hMove === cMove){
                        result.innerText = "It's a tie.";
                        progress.appendChild(result);
                    }else {
                        result.innerText = `You lost ! --     "${cMove}" beats "${hMove}"`;
                        progress.appendChild(result);
                        cpu++;
                    }
                    playerScore.innerText = human;
                    cpuScore.innerText = cpu;

                    if (human === 5 || cpu === 5) {
                        if (human > cpu) {
                            alert("You won");
                        }else {
                            alert("The computer won !");
                        }
                        return 0;
                    }
                }else {
                    alert("Please Press 'Reset' to Play Again");
                }
                                
            }

            
            for (let i =0; i< btns.length ; i++){
                btns[i].addEventListener("click", () => playRound(btns[i].id, match));
            }

            reset.addEventListener("click", () => { 
                                                human = 0;
                                                cpu = 0;
                                                playerScore.innerText = human;
                                                cpuScore.innerText = cpu;
                                                resetGame(match);});




        }

        function resetGame(match){
            let prog = match.querySelector("ul");
            prog.innerText = "";    
        }



        playGame(match);


    
        

    </script>
</body>
</html>